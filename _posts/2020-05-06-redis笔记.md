---
layout:     post
title:      redis学习笔记
subtitle:   redis基础
date:       2020-05-06
author:     bww126
header-img: img/bg/gray-bg.PNG
catalog: true
tags:
    - redis
---



## 一、线程模型

#### 1、单线程模型

![](https://raw.githubusercontent.com/bww126/bww126.github.io/master/img/redis/redis_NIO_thread.jpg)

**单线程**

Redis在处理客户端的请求时，包括获取 (socket 读)、解析、执行、内容返回 (socket 写) 等都由一个顺序串行的主线程处理。

**为什么使用单线程**

- Redis主要受限于网络和内存，几乎不存在cpu成为瓶颈的情况。
- 可维护性高，无并发读写问题，系统复杂度低，不存在线程切换、加锁解锁、死锁造成的性能损耗。

**并不是绝对的单线程**

从Redis4.0之后，除主线程之外，存在其他后台线程处理一些较为缓慢的操作，如清理脏数据、释放无用链接、大key的删除等。

#### 2、Redis6.0版本支持多线程

**为什么引入多线程IO**

- 充分利用多核资源
- 多线程任务可以分摊Redis同步IO读写负荷

**特点**

- IO 线程要么同时在读 socket，要么同时在写，不会同时读或写
- IO 线程只负责读写 socket 解析命令，不负责命令处理，执行命令仍然是单线程顺序处理

#### 3、为什么这么快

- 纯内存操作
- 非阻塞式IO
- IO多路复用
- C语言实现
- 单线程、避免了不必要的上下文切换和竞争问题

## 二、五大Value类型

## 参考文献
https://my.oschina.net/pl123/blog/3159262
https://juejin.im/post/5d917d855188250458352a21#heading-5
[https://github.com/gyoomi/redis/blob/master/src/main/java/com/gyoomi/redis/note/11_%E5%8E%9F%E7%90%86%201%EF%BC%9A%E9%9E%AD%E8%BE%9F%E5%85%A5%E9%87%8C%20%E2%80%94%E2%80%94%20%E7%BA%BF%E7%A8%8B%20IO%20%E6%A8%A1%E5%9E%8B.md](https://github.com/gyoomi/redis/blob/master/src/main/java/com/gyoomi/redis/note/11_原理 1：鞭辟入里 —— 线程 IO 模型.md)
https://juejin.im/post/5dabdb1ee51d45216d7b166a#heading-1
https://www.cnblogs.com/madashu/p/12832766.html 
